<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Video Call App</title>
	<link rel="stylesheet" type="text/css" href="index.css">
	<link rel="stylesheet" type="text/css" href="home.css">
    <script type="text/javascript" src="/socket.io/socket.io.js"></script>
    <script src="https://kit.fontawesome.com/823929f852.js" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/peerjs@1.3.1/dist/peerjs.min.js"></script>
	<script>
		const username = "<%= username %>";
	</script>
</head>
<body>
	<div class="navbar">
		<div class="nav-brand">Video Call</div>
		<div class="nav-segment">
			<div class="nav-item">
				<div class="nav-link">Welcome <%= username %></div>
			</div>
			<div class="nav-item">
				<button class="nav-link" onclick="showModal('notification-cont')">B</button>
			</div>
			<div class="nav-item">
				<div class="nav-link">
					<form action="/logout" method="POST">
						<button type="submit" class="non-highlighted-btn">Logout</button>
					</form>
				</div>
			</div>
		</div>
	</div> <!-- navbar -->

	<div class="main-cont">
		<div class="jumbotron">
			<div class="hero-cont">
				<div class="hero-title">Video Call App</div>
				<p>Easily video call anyone. Save contacts, create video call groups, etc.</p>
				<button onclick="showModal('start-new-call-modal')" class="big-highlighted-btns">New Call</button>
				<button onclick="showModal('join-call-modal')" class="big-highlighted-btns">Join Call</button>
			</div>
			<img src="media/hero.jpg" class="hero-img">
		</div>	

		<div class="contacts-list-cont">
			<div class="cont-title">Contacts</div>
				<div class="contacts-list">
					<div class="new-contact-btn" onclick="showModal('new-contact-modal')">
						New
					</div>
				</div>
			</div>
		</div>
	</div> <!-- main-cont -->

	<div class="modal" id="join-call-modal">
		<div class="modal-cont">
			<div class="modal-title">Join a existing Call</div>
			<input type="text" id="call-link-input" placeholder="Enter Call Link... ">
			<div>
				<button class="modal-submit highlighted-btn">Call</button>
				<button class="modal-submit non-highlighted-btn" onclick="closeModal('join-call-modal')">Cancel</button>
			</div>
		</div>
	</div> <!-- Join new Call modal -->

	<div class="modal" id="new-contact-modal">
		<div class="modal-cont">
			<div class="modal-title">Add New Contact</div>
			<input type="text" id="new-contact-input" placeholder="Enter Username... ">
			<div>
				<button class="modal-submit highlighted-btn" onclick="addContact()">Add</button>
				<button class="modal-submit non-highlighted-btn" onclick="closeModal('new-contact-modal')">Cancel</button>
			</div>
		</div>
	</div> <!-- Add new Contact -->

	<div class="modal" id="start-new-call-modal">
		<div class="modal-cont">
			<div class="modal-title">Please select people to call</div>
			<div class="newCall-contacts-list">
				<div class="newCall-contacts-item" style="margin: 4px;">No Contacts</div>
			</div>
			<div class="modal-controls">
				<button class="modal-submit highlighted-btn" onclick="call()">Call</button>
				<button class="modal-cancel non-highlighted-btn" onclick="closeModal('start-new-call-modal')">Cancel</button>
			</div>
		</div>
	</div> <!-- start new Call modal -->

	<div class="notification-box" id="notification-cont">
		<div class="notification-top">
			<span>Notification</span>
			<div class="close-btn" onclick="closeModal('notification-cont')">x</div>
		</div>
		<div class="notification" id="not1">
			<div>
				Manas invited you
			</div>
			<button class="accept-call-btn">Join group</button>
		</div>
	</div> <!-- notification box -->

	<div class="modal" id="caller-screen-cont" style="display: none;">
		<div class="caller-screen-modal">
			<div class="caller-screen-title">
				Manas is Calling you
			</div>
			<div class="caller-screen-members">
				Members: Neel, Ashutosh, Avinash ...
			</div>
			<div class="caller-screen-controls">
				<button class="highlighted-btn" onclick="joinCall()">Accept</button>
				<button class="non-highlighted-btn" onclick="declineCall()">Decline</button>
			</div>
		</div>
	</div> <!-- caller screen modal -->

	<script src="home.js"></script>
</body>
</html>